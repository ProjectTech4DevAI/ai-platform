"""add_db_comments

Revision ID: 040
Revises: 039
Create Date: 2025-12-15 13:17:01.138399

"""
from alembic import op
import sqlalchemy as sa
import sqlmodel.sql.sqltypes
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = "040"
down_revision = "039"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column(
        "apikey",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "user_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the user for whom the API key was created",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the API key",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "key_prefix",
        existing_type=sa.VARCHAR(),
        comment="Unique prefix portion of the API key for identification",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "key_hash",
        existing_type=sa.VARCHAR(),
        comment="Bcrypt hash of the secret of the API key",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the API key was created",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the API key was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the API key was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the batch job",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('batch_job_id_seq'::regclass)"),
    )
    op.alter_column(
        "batch_job",
        "provider",
        existing_type=sa.VARCHAR(),
        comment="LLM provider name (e.g., openai, anthropic)",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "job_type",
        existing_type=sa.VARCHAR(),
        comment="Type of batch job (e.g., evaluation, classification, embedding)",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "config",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment="Complete batch configuration including model, temperature, instructions, tools, etc.",
        existing_nullable=False,
        existing_server_default=sa.text("'{}'::jsonb"),
    )
    op.alter_column(
        "batch_job",
        "provider_batch_id",
        existing_type=sa.VARCHAR(),
        comment="Provider's batch job ID (e.g., OpenAI batch_id)",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_file_id",
        existing_type=sa.VARCHAR(),
        comment="Provider's input file ID",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_output_file_id",
        existing_type=sa.VARCHAR(),
        comment="Provider's output file ID",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_status",
        existing_type=sa.VARCHAR(),
        comment="Provider-specific status (e.g., validating, in_progress, completed, failed)",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "raw_output_url",
        existing_type=sa.VARCHAR(),
        comment="S3 URL of raw batch output file",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "total_items",
        existing_type=sa.INTEGER(),
        comment="Total number of items in the batch",
        existing_nullable=False,
        existing_server_default=sa.text("0"),
    )
    op.alter_column(
        "batch_job",
        "error_message",
        existing_type=sa.TEXT(),
        comment="Error message if batch failed",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the batch job was started",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the batch job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the collection",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "llm_service_id",
        existing_type=sa.VARCHAR(),
        comment="External LLM service identifier (e.g., OpenAI vector store ID)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "llm_service_name",
        existing_type=sa.VARCHAR(),
        comment="Name of the LLM service provider",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the collection was created",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the collection was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the collection was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the collection job",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "SUCCESSFUL", "FAILED", name="collectionjobstatus"
        ),
        comment="Current job status (PENDING, PROCESSING, SUCCESSFUL, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "action_type",
        existing_type=postgresql.ENUM("CREATE", "DELETE", name="collectionactiontype"),
        comment="Type of operation (CREATE, DELETE)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment="Celery task ID for async processing",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "error_message",
        existing_type=sa.TEXT(),
        comment="Error message if the job failed",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "collection_id",
        existing_type=sa.UUID(),
        comment="Reference to the collection",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "name",
        existing_type=sa.VARCHAR(length=128),
        comment="Configuration name",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "description",
        existing_type=sa.VARCHAR(length=512),
        comment="Description of the configuration",
        existing_nullable=True,
    )
    op.alter_column(
        "config",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the configuration",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the configuration was created",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the configuration was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the configuration was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "config_version",
        "config_blob",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment="Provider-specific configuration parameters (temperature, max_tokens, etc.)",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "commit_message",
        existing_type=sa.VARCHAR(length=512),
        comment="Optional message describing the changes in this version",
        existing_nullable=True,
    )
    op.alter_column(
        "config_version",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the configuration version",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "config_id",
        existing_type=sa.UUID(),
        comment="Reference to the parent configuration",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "version",
        existing_type=sa.INTEGER(),
        comment="Version number starting at 1",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the version was created",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the version was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the version was soft-deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "credential",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment="Flag indicating if this credential is currently active and usable",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique ID for the credential",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "credential",
        "provider",
        existing_type=sa.VARCHAR(),
        comment="Provider name like 'openai', 'gemini'",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "credential",
        existing_type=sa.VARCHAR(),
        comment="Encrypted JSON string containing provider-specific API credentials",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the credential was created",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the credential was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the transformation job",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "COMPLETED", "FAILED", name="transformationstatus"
        ),
        comment="Current status (PENDING, PROCESSING, COMPLETED, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment="Celery task ID for async processing",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment="Error message if transformation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "source_document_id",
        existing_type=sa.UUID(),
        comment="Reference to the source document being transformed",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "transformed_document_id",
        existing_type=sa.UUID(),
        comment="Reference to the resulting transformed document",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "fname",
        existing_type=sa.VARCHAR(),
        comment="Original filename of the document",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the document",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment="Cloud storage URL for the document",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "source_document_id",
        existing_type=sa.UUID(),
        comment="Reference to source document if this is a transformation",
        existing_nullable=True,
    )
    op.alter_column(
        "document",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the document was uploaded",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the document was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the document was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "documentcollection",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the document-collection link",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "documentcollection",
        "document_id",
        existing_type=sa.UUID(),
        comment="Reference to the document",
        existing_nullable=False,
    )
    op.alter_column(
        "documentcollection",
        "collection_id",
        existing_type=sa.UUID(),
        comment="Reference to the collection",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the dataset",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text(
            "nextval('evaluation_dataset_id_seq'::regclass)"
        ),
    )
    op.alter_column(
        "evaluation_dataset",
        "name",
        existing_type=sa.VARCHAR(),
        comment="Name of the evaluation dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "description",
        existing_type=sa.VARCHAR(),
        comment="Description of the dataset",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "dataset_metadata",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment="Dataset metadata (item counts, duplication factor, etc.)",
        existing_nullable=False,
        existing_server_default=sa.text("'{}'::jsonb"),
    )
    op.alter_column(
        "evaluation_dataset",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment="S3 URL where the dataset CSV is stored",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "langfuse_dataset_id",
        existing_type=sa.VARCHAR(),
        comment="Langfuse dataset ID for observability integration",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the evaluation dataset was created",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the evaluation dataset was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the evaluation run",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "evaluation_run",
        "run_name",
        existing_type=sa.VARCHAR(),
        comment="Name of the evaluation run",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "dataset_name",
        existing_type=sa.VARCHAR(),
        comment="Name of the Langfuse dataset used",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "config",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment="Evaluation configuration (model, instructions, etc.)",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "dataset_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the evaluation dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "batch_job_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the batch job for responses",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "embedding_batch_job_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the batch job for embedding similarity scoring",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "status",
        existing_type=sa.VARCHAR(),
        comment="Evaluation status (pending, processing, completed, failed)",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment="S3 URL of processed evaluation results",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "total_items",
        existing_type=sa.INTEGER(),
        comment="Total number of items evaluated",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "score",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment="Evaluation scores (correctness, cosine_similarity, etc.)",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "error_message",
        existing_type=sa.TEXT(),
        comment="Error message if evaluation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "base_model",
        existing_type=sa.VARCHAR(),
        comment="Base model used for fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "split_ratio",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment="Train/test split ratio for the dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "training_file_id",
        existing_type=sa.VARCHAR(),
        comment="OpenAI training file identifier",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "system_prompt",
        existing_type=sa.TEXT(),
        comment="System prompt used during fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the fine-tuning job",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('fine_tuning_id_seq'::regclass)"),
    )
    op.alter_column(
        "fine_tuning",
        "provider_job_id",
        existing_type=sa.VARCHAR(),
        comment="Fine-tuning job ID returned by the provider",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "status",
        existing_type=postgresql.ENUM(
            "pending", "running", "completed", "failed", name="finetuningstatus"
        ),
        comment="Current status of the fine-tuning job",
        existing_nullable=False,
        existing_server_default=sa.text("'pending'::finetuningstatus"),
    )
    op.alter_column(
        "fine_tuning",
        "fine_tuned_model",
        existing_type=sa.VARCHAR(),
        comment="Name of the resulting fine-tuned model",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "train_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment="S3 URL of the training data",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "test_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment="S3 URL of the testing data",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment="Error message if the job failed",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "document_id",
        existing_type=sa.UUID(),
        comment="Reference to the training document",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "id",
        existing_type=sa.UUID(),
        comment="Unique identifier for the job",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment="Celery task ID returned when job is queued",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment="Error details if the job fails",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "SUCCESS", "FAILED", name="jobstatus"
        ),
        comment="Current state of the job (PENDING, PROCESSING, SUCCESS, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "job_type",
        existing_type=postgresql.ENUM("RESPONSE", "LLM_API", name="jobtype"),
        comment="Type of job being executed (e.g., RESPONSE, LLM_API)",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "created_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the model evaluation",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "model_evaluation",
        "fine_tuned_model",
        existing_type=sa.VARCHAR(),
        comment="Name of the fine-tuned model being evaluated",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "test_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment="S3 URI of the testing data",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "base_model",
        existing_type=sa.VARCHAR(),
        comment="Base model used for fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "split_ratio",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment="Train/test split ratio used",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "system_prompt",
        existing_type=sa.TEXT(),
        comment="System prompt used during evaluation",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "score",
        existing_type=postgresql.JSON(astext_type=sa.Text()),
        comment="Evaluation scores per metric (e.g., MCC)",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "prediction_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment="S3 URL where the prediction data is stored",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "status",
        existing_type=postgresql.ENUM(
            "pending", "running", "completed", "failed", name="modelevaluationstatus"
        ),
        comment="Current status of the evaluation",
        existing_nullable=False,
        existing_server_default=sa.text("'pending'::modelevaluationstatus"),
    )
    op.alter_column(
        "model_evaluation",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment="Error message if evaluation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "fine_tuning_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the fine-tuning job",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "document_id",
        existing_type=sa.UUID(),
        comment="Reference to the evaluation document",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the evaluation was created",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the evaluation was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the evaluation was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_assistant",
        "assistant_id",
        existing_type=sa.VARCHAR(length=255),
        comment="Unique identifier for the assistant at OpenAI",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment="Name of the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "instructions",
        existing_type=sa.TEXT(),
        comment="System instructions for the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "model",
        existing_type=sa.VARCHAR(),
        comment="OpenAI model used by the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "vector_store_ids",
        existing_type=postgresql.ARRAY(sa.VARCHAR()),
        comment="List of OpenAI vector store IDs attached",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_assistant",
        "temperature",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment="Parameter that controls the creativity or randomness of the text generated by model",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "max_num_results",
        existing_type=sa.INTEGER(),
        comment="Parameter that controls maximum number of results to return",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the assistant",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_assistant",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
        existing_server_default=sa.text("false"),
    )
    op.alter_column(
        "openai_assistant",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the assistant was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the assistant was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the assistant was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "response_id",
        existing_type=sa.VARCHAR(),
        comment="OpenAI response identifier",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "ancestor_response_id",
        existing_type=sa.VARCHAR(),
        comment="Root response ID for conversation threading",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "previous_response_id",
        existing_type=sa.VARCHAR(),
        comment="Previous response ID in the conversation chain",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "user_question",
        existing_type=sa.VARCHAR(),
        comment="User's question or input text",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "response",
        existing_type=sa.VARCHAR(),
        comment="Response generated by OpenAI",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "model",
        existing_type=sa.VARCHAR(),
        comment="Model used to generate the response",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "assistant_id",
        existing_type=sa.VARCHAR(),
        comment="OpenAI assistant identifier if used",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "project_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the conversation record",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_conversation",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the conversation was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the conversation was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the conversation was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "thread_id",
        existing_type=sa.VARCHAR(),
        comment="OpenAI thread identifier",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "prompt",
        existing_type=sa.VARCHAR(),
        comment="User prompt sent to the thread",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "response",
        existing_type=sa.VARCHAR(),
        comment="Response received from OpenAI",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "status",
        existing_type=sa.VARCHAR(),
        comment="Current status of the thread interaction",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "error",
        existing_type=sa.VARCHAR(),
        comment="Error message if the interaction failed",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the thread record",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_thread",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the record was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the record was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment="Organization name (unique identifier)",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment="Flag indicating if the organization is active",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the organization",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('organization_id_seq'::regclass)"),
    )
    op.alter_column(
        "organization",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the organization was created",
        existing_nullable=False,
        existing_server_default=sa.text("now()"),
    )
    op.alter_column(
        "organization",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the organization was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment="Project name",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "description",
        existing_type=sa.VARCHAR(length=500),
        comment="Project description",
        existing_nullable=True,
    )
    op.alter_column(
        "project",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment="Flag indicating if the project is active",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the project",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('project_id_seq'::regclass)"),
    )
    op.alter_column(
        "project",
        "storage_path",
        existing_type=sa.UUID(),
        comment="Unique UUID used for cloud storage path",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the project was created",
        existing_nullable=False,
        existing_server_default=sa.text("now()"),
    )
    op.alter_column(
        "project",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment="Timestamp when the project was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "email",
        existing_type=sa.VARCHAR(length=255),
        comment="User's email address",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment="Flag indicating if the user account is active",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "is_superuser",
        existing_type=sa.BOOLEAN(),
        comment="Flag indicating if user has superuser privileges",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "full_name",
        existing_type=sa.VARCHAR(length=255),
        comment="User's full name",
        existing_nullable=True,
    )
    op.alter_column(
        "user",
        "id",
        existing_type=sa.INTEGER(),
        comment="Unique identifier for the user",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('user_id_seq'::regclass)"),
    )
    op.alter_column(
        "user",
        "hashed_password",
        existing_type=sa.VARCHAR(),
        comment="Bcrypt hash of the user's password",
        existing_nullable=False,
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column(
        "user",
        "hashed_password",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Bcrypt hash of the user's password",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the user",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('user_id_seq'::regclass)"),
    )
    op.alter_column(
        "user",
        "full_name",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="User's full name",
        existing_nullable=True,
    )
    op.alter_column(
        "user",
        "is_superuser",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Flag indicating if user has superuser privileges",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Flag indicating if the user account is active",
        existing_nullable=False,
    )
    op.alter_column(
        "user",
        "email",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="User's email address",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the project was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the project was created",
        existing_nullable=False,
        existing_server_default=sa.text("now()"),
    )
    op.alter_column(
        "project",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "storage_path",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique UUID used for cloud storage path",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the project",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('project_id_seq'::regclass)"),
    )
    op.alter_column(
        "project",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Flag indicating if the project is active",
        existing_nullable=False,
    )
    op.alter_column(
        "project",
        "description",
        existing_type=sa.VARCHAR(length=500),
        comment=None,
        existing_comment="Project description",
        existing_nullable=True,
    )
    op.alter_column(
        "project",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="Project name",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the organization was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the organization was created",
        existing_nullable=False,
        existing_server_default=sa.text("now()"),
    )
    op.alter_column(
        "organization",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the organization",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('organization_id_seq'::regclass)"),
    )
    op.alter_column(
        "organization",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Flag indicating if the organization is active",
        existing_nullable=False,
    )
    op.alter_column(
        "organization",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="Organization name (unique identifier)",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the record was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the record was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the thread record",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_thread",
        "error",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Error message if the interaction failed",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "status",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Current status of the thread interaction",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "response",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Response received from OpenAI",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_thread",
        "prompt",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="User prompt sent to the thread",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_thread",
        "thread_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="OpenAI thread identifier",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the conversation was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the conversation was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the conversation was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the conversation record",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_conversation",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "assistant_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="OpenAI assistant identifier if used",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Model used to generate the response",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "response",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Response generated by OpenAI",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "user_question",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="User's question or input text",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "previous_response_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Previous response ID in the conversation chain",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_conversation",
        "ancestor_response_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Root response ID for conversation threading",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_conversation",
        "response_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="OpenAI response identifier",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the assistant was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_assistant",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the assistant was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the assistant was created",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
        existing_server_default=sa.text("false"),
    )
    op.alter_column(
        "openai_assistant",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the assistant",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "openai_assistant",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "max_num_results",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Parameter that controls maximum number of results to return",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "temperature",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment=None,
        existing_comment="Parameter that controls the creativity or randomness of the text generated by model",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "vector_store_ids",
        existing_type=postgresql.ARRAY(sa.VARCHAR()),
        comment=None,
        existing_comment="List of OpenAI vector store IDs attached",
        existing_nullable=True,
    )
    op.alter_column(
        "openai_assistant",
        "model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="OpenAI model used by the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "instructions",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="System instructions for the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "name",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="Name of the assistant",
        existing_nullable=False,
    )
    op.alter_column(
        "openai_assistant",
        "assistant_id",
        existing_type=sa.VARCHAR(length=255),
        comment=None,
        existing_comment="Unique identifier for the assistant at OpenAI",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the evaluation was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the evaluation was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the evaluation was created",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the evaluation document",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "fine_tuning_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the fine-tuning job",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Error message if evaluation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "status",
        existing_type=postgresql.ENUM(
            "pending", "running", "completed", "failed", name="modelevaluationstatus"
        ),
        comment=None,
        existing_comment="Current status of the evaluation",
        existing_nullable=False,
        existing_server_default=sa.text("'pending'::modelevaluationstatus"),
    )
    op.alter_column(
        "model_evaluation",
        "prediction_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL where the prediction data is stored",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "score",
        existing_type=postgresql.JSON(astext_type=sa.Text()),
        comment=None,
        existing_comment="Evaluation scores per metric (e.g., MCC)",
        existing_nullable=True,
    )
    op.alter_column(
        "model_evaluation",
        "system_prompt",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="System prompt used during evaluation",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "split_ratio",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment=None,
        existing_comment="Train/test split ratio used",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "base_model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Base model used for fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "test_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URI of the testing data",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "fine_tuned_model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the fine-tuned model being evaluated",
        existing_nullable=False,
    )
    op.alter_column(
        "model_evaluation",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the model evaluation",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "created_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "job_type",
        existing_type=postgresql.ENUM("RESPONSE", "LLM_API", name="jobtype"),
        comment=None,
        existing_comment="Type of job being executed (e.g., RESPONSE, LLM_API)",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "SUCCESS", "FAILED", name="jobstatus"
        ),
        comment=None,
        existing_comment="Current state of the job (PENDING, PROCESSING, SUCCESS, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "job",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Error details if the job fails",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Celery task ID returned when job is queued",
        existing_nullable=True,
    )
    op.alter_column(
        "job",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the job",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the training document",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Error message if the job failed",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "test_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL of the testing data",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "train_data_s3_object",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL of the training data",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "fine_tuned_model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the resulting fine-tuned model",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "status",
        existing_type=postgresql.ENUM(
            "pending", "running", "completed", "failed", name="finetuningstatus"
        ),
        comment=None,
        existing_comment="Current status of the fine-tuning job",
        existing_nullable=False,
        existing_server_default=sa.text("'pending'::finetuningstatus"),
    )
    op.alter_column(
        "fine_tuning",
        "provider_job_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Fine-tuning job ID returned by the provider",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the fine-tuning job",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('fine_tuning_id_seq'::regclass)"),
    )
    op.alter_column(
        "fine_tuning",
        "system_prompt",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="System prompt used during fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "training_file_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="OpenAI training file identifier",
        existing_nullable=True,
    )
    op.alter_column(
        "fine_tuning",
        "split_ratio",
        existing_type=sa.DOUBLE_PRECISION(precision=53),
        comment=None,
        existing_comment="Train/test split ratio for the dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "fine_tuning",
        "base_model",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Base model used for fine-tuning",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "error_message",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="Error message if evaluation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "score",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment=None,
        existing_comment="Evaluation scores (correctness, cosine_similarity, etc.)",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "total_items",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Total number of items evaluated",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL of processed evaluation results",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "status",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Evaluation status (pending, processing, completed, failed)",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "embedding_batch_job_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the batch job for embedding similarity scoring",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "batch_job_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the batch job for responses",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_run",
        "dataset_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the evaluation dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "config",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment=None,
        existing_comment="Evaluation configuration (model, instructions, etc.)",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "dataset_name",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the Langfuse dataset used",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "run_name",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the evaluation run",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_run",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the evaluation run",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the evaluation dataset was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the evaluation dataset was created",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "langfuse_dataset_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Langfuse dataset ID for observability integration",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL where the dataset CSV is stored",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "dataset_metadata",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment=None,
        existing_comment="Dataset metadata (item counts, duplication factor, etc.)",
        existing_nullable=False,
        existing_server_default=sa.text("'{}'::jsonb"),
    )
    op.alter_column(
        "evaluation_dataset",
        "description",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Description of the dataset",
        existing_nullable=True,
    )
    op.alter_column(
        "evaluation_dataset",
        "name",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the evaluation dataset",
        existing_nullable=False,
    )
    op.alter_column(
        "evaluation_dataset",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the dataset",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text(
            "nextval('evaluation_dataset_id_seq'::regclass)"
        ),
    )
    op.alter_column(
        "documentcollection",
        "collection_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the collection",
        existing_nullable=False,
    )
    op.alter_column(
        "documentcollection",
        "document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the document",
        existing_nullable=False,
    )
    op.alter_column(
        "documentcollection",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the document-collection link",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "document",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the document was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "document",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the document was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the document was uploaded",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "source_document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to source document if this is a transformation",
        existing_nullable=True,
    )
    op.alter_column(
        "document",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "object_store_url",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Cloud storage URL for the document",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the document",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "document",
        "fname",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Original filename of the document",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "transformed_document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the resulting transformed document",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "source_document_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the source document being transformed",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "error_message",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Error message if transformation failed",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Celery task ID for async processing",
        existing_nullable=True,
    )
    op.alter_column(
        "doc_transformation_job",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "COMPLETED", "FAILED", name="transformationstatus"
        ),
        comment=None,
        existing_comment="Current status (PENDING, PROCESSING, COMPLETED, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "doc_transformation_job",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the transformation job",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the credential was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the credential was created",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "credential",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Encrypted JSON string containing provider-specific API credentials",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "provider",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Provider name like 'openai', 'gemini'",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique ID for the credential",
        existing_nullable=False,
        autoincrement=True,
    )
    op.alter_column(
        "credential",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "credential",
        "is_active",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Flag indicating if this credential is currently active and usable",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the version was soft-deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "config_version",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the version was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the version was created",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "version",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Version number starting at 1",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "config_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the parent configuration",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the configuration version",
        existing_nullable=False,
    )
    op.alter_column(
        "config_version",
        "commit_message",
        existing_type=sa.VARCHAR(length=512),
        comment=None,
        existing_comment="Optional message describing the changes in this version",
        existing_nullable=True,
    )
    op.alter_column(
        "config_version",
        "config_blob",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment=None,
        existing_comment="Provider-specific configuration parameters (temperature, max_tokens, etc.)",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the configuration was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "config",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the configuration was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the configuration was created",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the configuration",
        existing_nullable=False,
    )
    op.alter_column(
        "config",
        "description",
        existing_type=sa.VARCHAR(length=512),
        comment=None,
        existing_comment="Description of the configuration",
        existing_nullable=True,
    )
    op.alter_column(
        "config",
        "name",
        existing_type=sa.VARCHAR(length=128),
        comment=None,
        existing_comment="Configuration name",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the job was created",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "collection_id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Reference to the collection",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "error_message",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="Error message if the job failed",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "trace_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Tracing ID for correlating logs and traces",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "task_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Celery task ID for async processing",
        existing_nullable=True,
    )
    op.alter_column(
        "collection_jobs",
        "action_type",
        existing_type=postgresql.ENUM("CREATE", "DELETE", name="collectionactiontype"),
        comment=None,
        existing_comment="Type of operation (CREATE, DELETE)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "status",
        existing_type=postgresql.ENUM(
            "PENDING", "PROCESSING", "SUCCESSFUL", "FAILED", name="collectionjobstatus"
        ),
        comment=None,
        existing_comment="Current job status (PENDING, PROCESSING, SUCCESSFUL, FAILED)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection_jobs",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the collection job",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the collection was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "collection",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the collection was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the collection was created",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "llm_service_name",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Name of the LLM service provider",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "llm_service_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="External LLM service identifier (e.g., OpenAI vector store ID)",
        existing_nullable=False,
    )
    op.alter_column(
        "collection",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the collection",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the batch job was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the batch job was started",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "error_message",
        existing_type=sa.TEXT(),
        comment=None,
        existing_comment="Error message if batch failed",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "total_items",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Total number of items in the batch",
        existing_nullable=False,
        existing_server_default=sa.text("0"),
    )
    op.alter_column(
        "batch_job",
        "raw_output_url",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="S3 URL of raw batch output file",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_status",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Provider-specific status (e.g., validating, in_progress, completed, failed)",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_output_file_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Provider's output file ID",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_file_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Provider's input file ID",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "provider_batch_id",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Provider's batch job ID (e.g., OpenAI batch_id)",
        existing_nullable=True,
    )
    op.alter_column(
        "batch_job",
        "config",
        existing_type=postgresql.JSONB(astext_type=sa.Text()),
        comment=None,
        existing_comment="Complete batch configuration including model, temperature, instructions, tools, etc.",
        existing_nullable=False,
        existing_server_default=sa.text("'{}'::jsonb"),
    )
    op.alter_column(
        "batch_job",
        "job_type",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Type of batch job (e.g., evaluation, classification, embedding)",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "provider",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="LLM provider name (e.g., openai, anthropic)",
        existing_nullable=False,
    )
    op.alter_column(
        "batch_job",
        "id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Unique identifier for the batch job",
        existing_nullable=False,
        autoincrement=True,
        existing_server_default=sa.text("nextval('batch_job_id_seq'::regclass)"),
    )
    op.alter_column(
        "apikey",
        "deleted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the API key was deleted",
        existing_nullable=True,
    )
    op.alter_column(
        "apikey",
        "updated_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the API key was last updated",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "inserted_at",
        existing_type=postgresql.TIMESTAMP(),
        comment=None,
        existing_comment="Timestamp when the API key was created",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "is_deleted",
        existing_type=sa.BOOLEAN(),
        comment=None,
        existing_comment="Soft delete flag",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "key_hash",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Bcrypt hash of the secret of the API key",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "key_prefix",
        existing_type=sa.VARCHAR(),
        comment=None,
        existing_comment="Unique prefix portion of the API key for identification",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "id",
        existing_type=sa.UUID(),
        comment=None,
        existing_comment="Unique identifier for the API key",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "user_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the user for whom the API key was created",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "project_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the project",
        existing_nullable=False,
    )
    op.alter_column(
        "apikey",
        "organization_id",
        existing_type=sa.INTEGER(),
        comment=None,
        existing_comment="Reference to the organization",
        existing_nullable=False,
    )
    # ### end Alembic commands ###
